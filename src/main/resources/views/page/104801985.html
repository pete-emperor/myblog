<html>
<head>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-4bfa3af0c6.min.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-c9d2f651cc.min.css">
<link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.4/css/sandalstrap.min.css">
<link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging-e040f0c7c8.css">
<style>
        .MathJax, .MathJax_Message, .MathJax_Preview{
            display: none
        }
    </style>
</head>
<body class="nodata " > 
    <link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
    <script id="toolbar-tpl-scriptId" src="https://csdnimg.cn/public/common/toolbar/js/content_toolbar.js" type="text/javascript" domain="https://blog.csdn.net/"></script>
    <script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging-e040f0c7c8.css">

<script type="text/javascript">
	var NEWS_FEED = function(){}
</script>

<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/chart-3456820cac.css" />
<div class="main_father clearfix d-flex justify-content-center" style="height:100%;"> 
    <div class="container clearfix" id="mainBox">
        <div  class='space_container'></div>
        <main>
            <div class="blog-content-box">
    <div class="article-header-box">
        <div class="article-header">
            <div class="article-title-box">
                <h1 class="title-article">使用DataBinding还在为数据处理头疼？这篇文章帮你解决问题</h1>
            </div>
            <div class="article-info-box">
                <div class="article-bar-top">
                    <!--文章类型-->
                    <span class="article-type type-1 float-left">原创</span>                                                                                                                                            <a class="follow-nickName" href="https://me.csdn.net/weixin_43901866" target="_blank" rel="noopener">Android Developer</a>
                    <span class="time">最后发布于2020-03-11 17:58:58                    </span>
                    <span class="read-count">阅读数 31</span>
                    <a id='blog_detail_zk_collection' class="un-collection" data-report-click='{"mod":"popu_823"}'>
                        <svg class="icon">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg>
                        <span>收藏</span>
                    </a>
                                    </div>
                                <div class="up-time">发布于2020-03-11 17:58:58</div>
                <div class="slide-content-box">
                                                        <div class="tags-box artic-tag-box">
                           <span class="label">分类专栏：</span>
                                                                                             <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9416379.html">
                                       Android                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9721804.html">
                                       技术                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9787385.html">
                                       framework                                   </a>
                                                                                  </div>
                                                                                                           <div class="article-copyright">
                        <span class="creativecommons">
                            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"></a>
                            <span>
                                版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。                            </span>
                            <div class="article-source-link2222">
                                本文链接：<a href="https://blog.csdn.net/weixin_43901866/article/details/104801985">https://blog.csdn.net/weixin_43901866/article/details/104801985</a>
                            </div>
                        </span> 
                        </div>
                                                                                </div>
                <div class="operating">
                                                                <a class="href-article-edit slide-toggle">展开</a>
                                    </div>
            </div>
        </div>
    </div>
    <article class="baidu_pl">
        <!--python安装手册开始-->
                <!--python安装手册结束-->
                <!--####专栏广告位图文切换开始-->
                                    <!--####专栏广告位图文切换结束-->
         <div id="article_content" class="article_content clearfix">
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-833878f763.css" />
                            <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <!-- flowchart 箭头图标 勿删 -->
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                                            <h1><a id="_0"></a>前言</h1>
<p>在前几年兴起了MVVM架构设计模式，最具有代表的框架就是DataBinding，虽然这种设计架构非常新颖，但是在使用中仍然还有很多痛点，所以我当时觉得短时间这个设计架构可能不会太流行。</p>
<p>最近接手了新项目，使用的就是MVVM，才发现只一两年的功夫MVVM的发展竟然这么快，已经是Android开发者必备的技能之一了。</p>
<h1><a id="_6"></a>正文</h1>
<p>DataBinding在刚开始阶段，最令我头疼的就是数据处理的问题，往往为了显示数据，我要在XML中绑定N多个字段，如果是一个中等以上的工程，还有更蛋疼的问题，例如：</p>
<ul>
<li>你的XML可能迫切的需要if或者switch这样的判断；</li>
<li>意想不到的空指针</li>
</ul>
<p>在2018年，Google推出JetPack库，其中的ViewModel+LIveData终于把MVVM推上了新的高度。</p>
<h2><a id="ViewModel_15"></a>ViewModel</h2>
<p>使用ViewModel需要依赖lifecycle库：</p>
<pre><code>implementation "android.arch.lifecycle:viewmodel:x.x.x"
implementation "android.arch.lifecycle:extensions:x.x.x"

</code></pre>
<p>ViewModel的创建方法主要有两种：</p>
<pre><code>// 获取FragmentActivity共享的ViewModel
ViewModelProviders.of(FragmentActivity).get(ViewModel::class.java)

// 获取FragmentActivity共享的ViewModel
ViewModelProviders.of(Fragment).get(ViewModel::class.java)

</code></pre>
<p>ViewModel的共享范围主要有两种：一种是FragmentActivity，一种是Fragment，可以根据自己的需要选择共享的范围。如果你想要一个Application级别的ViewModel，目前是不支持的，你可以自定义Application持有一个ViewModel，或者使用单例模式。</p>
<h3><a id="ViewModel_38"></a>ViewModel解决的问题</h3>
<p><strong>1、扩大数据共享的应用场景。</strong></p>
<p>一般的数据共享是Activity与Fragment的数据传递，传统做法是使用setArguments(Bundle)，这种方法有以下弊端：</p>
<ul>
<li>可能无法预测setArguments会在Fragment的哪个周期完成，要进行异常判断；</li>
<li>setArguments中的数据可能会发现改变，如果是Activity直接设置Fragment的数据，耦合性很高；</li>
<li>数据较多时，Fragment会有很多的变量，影响可读性和维护性。</li>
</ul>
<p>使用ViewModel，可以避免以上的尴尬情况，需要什么数据就从ViewModel中取：</p>
<ul>
<li>新加数据传递，不用修改Activity的setArguments代码，Fragment也不用编写数据接收的方法；</li>
<li>减少数据传递，不必考虑是否要删除暂时无用的代码；</li>
<li>取数据时，请注意数据的有效性，做好判断即可；</li>
</ul>
<p>除此之外，自定义View也可以得到ViewModel，这样某些功能耦合性非常强的自定义View开发更加便捷。不过需要注意的是View的context的上下文是Activity类型（不会是Fragment）的，所以只能使用Activity级别的数据共享。</p>
<p><strong>2、解决DataBinding的视图显示问题。</strong></p>
<p>如果视图的显示需要很多的数据，那么XML就会变得越来越臃肿，并且迫切需要添加一些简单的判断，例如:</p>
<blockquote>
<p>如果A为空就显示B，如果B为空就先是C，如果是C为空…</p>
</blockquote>
<p>虽然DataBinding支持三元运算符，能够满足if判断的需要，但是很显然在XML维护逻辑要比Java或者Kotlin要困难的多（无拼写错误提示等）。所以我们非常需要把部分代码从XML分离出来，ViewModel就非常适合担任这个角色。</p>
<p>修改前：</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;layout&gt;

    &lt;data&gt;

        &lt;variable
                name="A"
                type="String" /&gt;

        &lt;variable
                name="B"
                type="String" /&gt;

        &lt;variable
                name="C"
                type="String" /&gt;

    &lt;/data&gt;

     &lt;TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="4"
                android:ellipsize="middle"
                android:text="A != null ? A : B != null ? B : C" /&gt;
    ...

&lt;/layout&gt;

</code></pre>
<p>修改后：</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;layout&gt;

    &lt;data&gt;

        &lt;variable
                name="viewModel"
                type="ViewModel" /&gt;

    &lt;/data&gt;

    &lt;TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="4"
                android:ellipsize="middle"
                android:text="@{viewModel.getShowContent()}" /&gt;
...

&lt;/layout&gt;

</code></pre>
<h3><a id="LiveData_124"></a>LiveData</h3>
<p>刚才我们已经讨论了ViewModel的用法，但是还有一个问题没有解决，那就是数据更新的问题，解决这个问题的最佳方式就是观察者模式，但是如果没有处理好观察者的注册和解绑很容易出现内存溢出。LiveData就可以完美的解决这个问题。</p>
<p>我们需要添加LiveData的依赖：</p>
<pre><code>implementation "androidx.lifecycle:lifecycle-livedata:2.1.0"

</code></pre>
<p>下面是一个简单的示例：</p>
<pre><code>// 名为openDrawer的Boolean类型的LiveData
public final MutableLiveData&lt;Boolean&gt; openDrawer = new MutableLiveData&lt;&gt;();

// 更新openDrawer 
openDrawer.setValue(true)

// 观察openDrawer 的值的变化
openDrawer.observe(this, aBoolean -&gt; {
             Toast.makeText(this, "${aBoolean}", Toast.LENGTH_SHORT).show();
        });

</code></pre>
<p>LiveData的子类是MutableLiveData，内部有value属性保存最新的值，订阅LiveData的变化，直接调用LiveData.observe():</p>
<blockquote>
<p>public void observe(@NonNull LifecycleOwner owner, @NonNull Observer&lt;? super T&gt; observer)<br>
owner：注册的周期，会在owner销毁的时候，解绑观察者。<br>
observer：观察的值发生变化的回调函数</p>
</blockquote>
<p>owner直接使用Activity或者Fragment即可。如果你还不了解Lifecycle的使用，可以查看一下相关的资料。</p>
<h1><a id="_159"></a>总结</h1>
<p>最后我画了一张架构图，总结了一下最新的MVVM的使用架构：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy81NjE1NzYyLTgyZTZiOTIzZDY5NGJiOWI_aW1hZ2VNb2dyMi9hdXRvLW9yaWVudC9zdHJpcHxpbWFnZVZpZXcyLzIvdy8xMTAxL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>Activity：处理UI问题，但是应当尽量避免这样做，尽量统一使用DataBinding。<br>
ViewModel：保存页面需要的数据，功能复杂的话可以拆分成多个。<br>
DataBinding：处理UI视图，持有ViewModel做数据展示。如果页面功能比较复杂，可以对ViewModel和DataBinding再次细分。</p>
<p>如果大家对MVVM有更棒的理解，欢迎留言共同学习。<br>
<strong>推荐阅读：<a href="https://www.jianshu.com/p/7f9ade51232e" rel="nofollow">2017-2020历年字节跳动Android面试真题解析（累计下载1082万次，持续更新中）</a></strong></p>
<p>作者：珠穆朗玛小王子<br>
链接：https://www.jianshu.com/p/a2eb8e1807ef</p>

                                    </div>
                <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-60ecaf1f42.css" rel="stylesheet">
                                                <div class="more-toolbox">
                <div class="left-toolbox">
                    <ul class="toolbox-list">
                        
                        <li class="tool-item tool-active is-like "><a href="javascript:;"><svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-thumbsup"></use>
                        </svg><span class="name">点赞</span>
                        <span class="count"></span>
                        </a></li>
                        <li class="tool-item tool-active is-collection "><a href="javascript:;" data-report-click='{"mod":"popu_824"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg><span class="name">收藏</span></a></li>
                        <li class="tool-item tool-active is-share"><a href="javascript:;" data-report-click='{"mod":"1582594662_002"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-fenxiang"></use>
                        </svg>分享</a></li>
                        <!--打赏开始-->
                                                <!--打赏结束-->
                                                <li class="tool-item tool-more">
                            <a>
                            <svg t="1575545411852" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5717" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style>
</head>
<body>
<div style="width:852px;margin:0 auto;">
<div class="blog-content-box">
    <div class="article-header-box">
        <div class="article-header">
            <div class="article-title-box">
                <h1 class="title-article">使用DataBinding还在为数据处理头疼？这篇文章帮你解决问题</h1>
            </div>
            <div class="article-info-box">
                <div class="article-bar-top">
                    <!--文章类型-->
                    <span class="article-type type-1 float-left">原创</span>                                                                                                                                            <a class="follow-nickName" href="https://me.csdn.net/weixin_43901866" target="_blank" rel="noopener">Android Developer</a>
                    <span class="time">最后发布于2020-03-11 17:58:58                    </span>
                    <span class="read-count">阅读数 31</span>
                    <a id='blog_detail_zk_collection' class="un-collection" data-report-click='{"mod":"popu_823"}'>
                        <svg class="icon">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg>
                        <span>收藏</span>
                    </a>
                                    </div>
                                <div class="up-time">发布于2020-03-11 17:58:58</div>
                <div class="slide-content-box">
                                                        <div class="tags-box artic-tag-box">
                           <span class="label">分类专栏：</span>
                                                                                             <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9416379.html">
                                       Android                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9721804.html">
                                       技术                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9787385.html">
                                       framework                                   </a>
                                                                                  </div>
                                                                                                           <div class="article-copyright">
                        <span class="creativecommons">
                            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"></a>
                            <span>
                                版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。                            </span>
                            <div class="article-source-link2222">
                                本文链接：<a href="https://blog.csdn.net/weixin_43901866/article/details/104801985">https://blog.csdn.net/weixin_43901866/article/details/104801985</a>
                            </div>
                        </span> 
                        </div>
                                                                                </div>
                <div class="operating">
                                                                <a class="href-article-edit slide-toggle">展开</a>
                                    </div>
            </div>
        </div>
    </div>
    <article class="baidu_pl">
        <!--python安装手册开始-->
                <!--python安装手册结束-->
                <!--####专栏广告位图文切换开始-->
                                    <!--####专栏广告位图文切换结束-->
         <div id="article_content" class="article_content clearfix">
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-833878f763.css" />
                            <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <!-- flowchart 箭头图标 勿删 -->
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                                            <h1><a id="_0"></a>前言</h1>
<p>在前几年兴起了MVVM架构设计模式，最具有代表的框架就是DataBinding，虽然这种设计架构非常新颖，但是在使用中仍然还有很多痛点，所以我当时觉得短时间这个设计架构可能不会太流行。</p>
<p>最近接手了新项目，使用的就是MVVM，才发现只一两年的功夫MVVM的发展竟然这么快，已经是Android开发者必备的技能之一了。</p>
<h1><a id="_6"></a>正文</h1>
<p>DataBinding在刚开始阶段，最令我头疼的就是数据处理的问题，往往为了显示数据，我要在XML中绑定N多个字段，如果是一个中等以上的工程，还有更蛋疼的问题，例如：</p>
<ul>
<li>你的XML可能迫切的需要if或者switch这样的判断；</li>
<li>意想不到的空指针</li>
</ul>
<p>在2018年，Google推出JetPack库，其中的ViewModel+LIveData终于把MVVM推上了新的高度。</p>
<h2><a id="ViewModel_15"></a>ViewModel</h2>
<p>使用ViewModel需要依赖lifecycle库：</p>
<pre><code>implementation "android.arch.lifecycle:viewmodel:x.x.x"
implementation "android.arch.lifecycle:extensions:x.x.x"

</code></pre>
<p>ViewModel的创建方法主要有两种：</p>
<pre><code>// 获取FragmentActivity共享的ViewModel
ViewModelProviders.of(FragmentActivity).get(ViewModel::class.java)

// 获取FragmentActivity共享的ViewModel
ViewModelProviders.of(Fragment).get(ViewModel::class.java)

</code></pre>
<p>ViewModel的共享范围主要有两种：一种是FragmentActivity，一种是Fragment，可以根据自己的需要选择共享的范围。如果你想要一个Application级别的ViewModel，目前是不支持的，你可以自定义Application持有一个ViewModel，或者使用单例模式。</p>
<h3><a id="ViewModel_38"></a>ViewModel解决的问题</h3>
<p><strong>1、扩大数据共享的应用场景。</strong></p>
<p>一般的数据共享是Activity与Fragment的数据传递，传统做法是使用setArguments(Bundle)，这种方法有以下弊端：</p>
<ul>
<li>可能无法预测setArguments会在Fragment的哪个周期完成，要进行异常判断；</li>
<li>setArguments中的数据可能会发现改变，如果是Activity直接设置Fragment的数据，耦合性很高；</li>
<li>数据较多时，Fragment会有很多的变量，影响可读性和维护性。</li>
</ul>
<p>使用ViewModel，可以避免以上的尴尬情况，需要什么数据就从ViewModel中取：</p>
<ul>
<li>新加数据传递，不用修改Activity的setArguments代码，Fragment也不用编写数据接收的方法；</li>
<li>减少数据传递，不必考虑是否要删除暂时无用的代码；</li>
<li>取数据时，请注意数据的有效性，做好判断即可；</li>
</ul>
<p>除此之外，自定义View也可以得到ViewModel，这样某些功能耦合性非常强的自定义View开发更加便捷。不过需要注意的是View的context的上下文是Activity类型（不会是Fragment）的，所以只能使用Activity级别的数据共享。</p>
<p><strong>2、解决DataBinding的视图显示问题。</strong></p>
<p>如果视图的显示需要很多的数据，那么XML就会变得越来越臃肿，并且迫切需要添加一些简单的判断，例如:</p>
<blockquote>
<p>如果A为空就显示B，如果B为空就先是C，如果是C为空…</p>
</blockquote>
<p>虽然DataBinding支持三元运算符，能够满足if判断的需要，但是很显然在XML维护逻辑要比Java或者Kotlin要困难的多（无拼写错误提示等）。所以我们非常需要把部分代码从XML分离出来，ViewModel就非常适合担任这个角色。</p>
<p>修改前：</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;layout&gt;

    &lt;data&gt;

        &lt;variable
                name="A"
                type="String" /&gt;

        &lt;variable
                name="B"
                type="String" /&gt;

        &lt;variable
                name="C"
                type="String" /&gt;

    &lt;/data&gt;

     &lt;TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="4"
                android:ellipsize="middle"
                android:text="A != null ? A : B != null ? B : C" /&gt;
    ...

&lt;/layout&gt;

</code></pre>
<p>修改后：</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;layout&gt;

    &lt;data&gt;

        &lt;variable
                name="viewModel"
                type="ViewModel" /&gt;

    &lt;/data&gt;

    &lt;TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="4"
                android:ellipsize="middle"
                android:text="@{viewModel.getShowContent()}" /&gt;
...

&lt;/layout&gt;

</code></pre>
<h3><a id="LiveData_124"></a>LiveData</h3>
<p>刚才我们已经讨论了ViewModel的用法，但是还有一个问题没有解决，那就是数据更新的问题，解决这个问题的最佳方式就是观察者模式，但是如果没有处理好观察者的注册和解绑很容易出现内存溢出。LiveData就可以完美的解决这个问题。</p>
<p>我们需要添加LiveData的依赖：</p>
<pre><code>implementation "androidx.lifecycle:lifecycle-livedata:2.1.0"

</code></pre>
<p>下面是一个简单的示例：</p>
<pre><code>// 名为openDrawer的Boolean类型的LiveData
public final MutableLiveData&lt;Boolean&gt; openDrawer = new MutableLiveData&lt;&gt;();

// 更新openDrawer 
openDrawer.setValue(true)

// 观察openDrawer 的值的变化
openDrawer.observe(this, aBoolean -&gt; {
             Toast.makeText(this, "${aBoolean}", Toast.LENGTH_SHORT).show();
        });

</code></pre>
<p>LiveData的子类是MutableLiveData，内部有value属性保存最新的值，订阅LiveData的变化，直接调用LiveData.observe():</p>
<blockquote>
<p>public void observe(@NonNull LifecycleOwner owner, @NonNull Observer&lt;? super T&gt; observer)<br>
owner：注册的周期，会在owner销毁的时候，解绑观察者。<br>
observer：观察的值发生变化的回调函数</p>
</blockquote>
<p>owner直接使用Activity或者Fragment即可。如果你还不了解Lifecycle的使用，可以查看一下相关的资料。</p>
<h1><a id="_159"></a>总结</h1>
<p>最后我画了一张架构图，总结了一下最新的MVVM的使用架构：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy81NjE1NzYyLTgyZTZiOTIzZDY5NGJiOWI_aW1hZ2VNb2dyMi9hdXRvLW9yaWVudC9zdHJpcHxpbWFnZVZpZXcyLzIvdy8xMTAxL2Zvcm1hdC93ZWJw?x-oss-process=image/format,png" alt="image"></p>
<p>Activity：处理UI问题，但是应当尽量避免这样做，尽量统一使用DataBinding。<br>
ViewModel：保存页面需要的数据，功能复杂的话可以拆分成多个。<br>
DataBinding：处理UI视图，持有ViewModel做数据展示。如果页面功能比较复杂，可以对ViewModel和DataBinding再次细分。</p>
<p>如果大家对MVVM有更棒的理解，欢迎留言共同学习。<br>
<strong>推荐阅读：<a href="https://www.jianshu.com/p/7f9ade51232e" rel="nofollow">2017-2020历年字节跳动Android面试真题解析（累计下载1082万次，持续更新中）</a></strong></p>
<p>作者：珠穆朗玛小王子<br>
链接：https://www.jianshu.com/p/a2eb8e1807ef</p>

                                    </div>
                <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-60ecaf1f42.css" rel="stylesheet">
                                                <div class="more-toolbox">
                <div class="left-toolbox">
                    <ul class="toolbox-list">
                        
                        <li class="tool-item tool-active is-like "><a href="javascript:;"><svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-thumbsup"></use>
                        </svg><span class="name">点赞</span>
                        <span class="count"></span>
                        </a></li>
                        <li class="tool-item tool-active is-collection "><a href="javascript:;" data-report-click='{"mod":"popu_824"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg><span class="name">收藏</span></a></li>
                        <li class="tool-item tool-active is-share"><a href="javascript:;" data-report-click='{"mod":"1582594662_002"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-fenxiang"></use>
                        </svg>分享</a></li>
                        <!--打赏开始-->
                                                <!--打赏结束-->
                                                <li class="tool-item tool-more">
                            <a>
                            <svg t="1575545411852" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5717" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M179.176 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z" p-id="5718"></path><path d="M509.684 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z" p-id="5719"></path><path d="M846.175 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z" p-id="5720"></path></svg>
                            </a>
                            <ul class="more-box">
                                <li class="item"><a class="article-report">文章举报</a></li>
                            </ul>
                        </li>
                                            </ul>
                </div>
                            </div>
            <div class="person-messagebox">
                <div class="left-message"><a href="https://blog.csdn.net/weixin_43901866">
                    <img src="https://profile.csdnimg.cn/8/2/E/3_weixin_43901866" class="avatar_pic" username='weixin_43901866'>
                                            <img src="https://g.csdnimg.cn/static/user-reg-year/1x/1.png" class="user-years">
                                    </a></div>
                <div class="middle-message">
                                        <div class="title"><span class="tit"><a href="https://blog.csdn.net/weixin_43901866" data-report-click='{"mod":"popu_379"}' target="_blank">Android Developer</a></span>
                                            </div>
                    <div class="text"><span>发布了450 篇原创文章</span> · <span>获赞 730</span> · <span>访问量 20万+</span></div>
                </div>
                                <div class="right-message">
                                            <a href="https://bbs.csdn.net/topics/395532450" target="_blank"
                        class="btn btn-sm btn-red-hollow bt-button personal-messageboard">他的留言板
                        </a>
                                                            <a class="btn btn-sm  bt-button personal-watch" data-report-click='{"mod":"popu_379"}'>关注</a>
                                    </div>
                            </div>
                    </div>
    </article>
</div>
</div>
</body>
</html>
