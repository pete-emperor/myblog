<html>
<head>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-4bfa3af0c6.min.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-c9d2f651cc.min.css">
<link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.4/css/sandalstrap.min.css">
<link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging-e040f0c7c8.css">
<style>
        .MathJax, .MathJax_Message, .MathJax_Preview{
            display: none
        }
    </style>
</head>
<body class="nodata " > 
    <link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
    <script id="toolbar-tpl-scriptId" src="https://csdnimg.cn/public/common/toolbar/js/content_toolbar.js" type="text/javascript" domain="https://blog.csdn.net/"></script>
    <script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging-e040f0c7c8.css">

<script type="text/javascript">
	var NEWS_FEED = function(){}
</script>

<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/chart-3456820cac.css" />
<div class="main_father clearfix d-flex justify-content-center" style="height:100%;"> 
    <div class="container clearfix" id="mainBox">
        <div  class='space_container'></div>
        <main>
            <div class="blog-content-box">
    <div class="article-header-box">
        <div class="article-header">
            <div class="article-title-box">
                <h1 class="title-article">当中国诗词大会邂逅了Flutter，从此我的眼里只有你！</h1>
            </div>
            <div class="article-info-box">
                <div class="article-bar-top">
                    <!--文章类型-->
                    <span class="article-type type-1 float-left">原创</span>                                                                                                                                            <a class="follow-nickName" href="https://me.csdn.net/weixin_43901866" target="_blank" rel="noopener">Android Developer</a>
                    <span class="time">最后发布于2020-03-07 10:48:59                    </span>
                    <span class="read-count">阅读数 29</span>
                    <a id='blog_detail_zk_collection' class="un-collection" data-report-click='{"mod":"popu_823"}'>
                        <svg class="icon">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg>
                        <span>收藏</span>
                    </a>
                                    </div>
                                <div class="up-time">发布于2020-03-07 10:48:59</div>
                <div class="slide-content-box">
                                                        <div class="tags-box artic-tag-box">
                           <span class="label">分类专栏：</span>
                                                                                             <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9416379.html">
                                       Android                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9429255.html">
                                       程序员                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9721804.html">
                                       技术                                   </a>
                                                                                  </div>
                                                                                           <div class="tags-box artic-tag-box">
                                <span class="label">文章标签：</span>
                                                                <a data-report-click='{"mod":"popu_626","strategy":"java"}' data-report-view='{"mod":"popu_626","strategy":"java"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=java&t=blog" target="_blank" rel="noopener">java                                                                    <a data-report-click='{"mod":"popu_626","strategy":"android"}' data-report-view='{"mod":"popu_626","strategy":"android"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=android&t=blog" target="_blank" rel="noopener">android                                                                    <a data-report-click='{"mod":"popu_626","strategy":"编程语言"}' data-report-view='{"mod":"popu_626","strategy":"编程语言"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=编程语言&t=blog" target="_blank" rel="noopener">编程语言                                                                    <a data-report-click='{"mod":"popu_626","strategy":"Flutter"}' data-report-view='{"mod":"popu_626","strategy":"Flutter"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=Flutter&t=blog" target="_blank" rel="noopener">Flutter                                                                    <a data-report-click='{"mod":"popu_626","strategy":"跨平台"}' data-report-view='{"mod":"popu_626","strategy":"跨平台"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=跨平台&t=blog" target="_blank" rel="noopener">跨平台                                                                    </a>
                            </div>
                                                                                                                <div class="article-copyright">
                        <span class="creativecommons">
                            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"></a>
                            <span>
                                版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。                            </span>
                            <div class="article-source-link2222">
                                本文链接：<a href="https://blog.csdn.net/weixin_43901866/article/details/104710801">https://blog.csdn.net/weixin_43901866/article/details/104710801</a>
                            </div>
                        </span> 
                        </div>
                                                                                </div>
                <div class="operating">
                                                                <a class="href-article-edit slide-toggle">展开</a>
                                    </div>
            </div>
        </div>
    </div>
    <article class="baidu_pl">
        <!--python安装手册开始-->
                <!--python安装手册结束-->
                <!--####专栏广告位图文切换开始-->
                                    <!--####专栏广告位图文切换结束-->
         <div id="article_content" class="article_content clearfix">
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-833878f763.css" />
                            <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <!-- flowchart 箭头图标 勿删 -->
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                                            <h3><a id="_0"></a>前言</h3>
<p>Flutter是Google推出的跨平台的解决方案，Slogan是“Design beautiful apps”，国内也有知名企业在使用和推广，例如阿里、美团都有在尝试。</p>
<p>个人对其中的一些特性，比如JIT、Material Design、快速开发等很感兴趣，于是决定尝试一下。</p>
<h3><a id="_6"></a>诗词汇</h3>
<p>于是诞生了诗词汇APP，首先看一下是个什么样的APP。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNTAzODczNi0wMWMwNGEwNDdiOGRhY2Rj?x-oss-process=image/format,png" alt=""></p>
<p>接下来我们一步步从不同方面说说Flutter的开发。</p>
<h3><a id="_14"></a>开始</h3>
<p>FLutter可以在Windows、Linux、Mac上进行开发，开发工具可以使用VS Code、Android Studio、IDEA等，本文推荐使用Android Studio，主要在于Android Studio提供了FLutter Inspector工具，可以实时审查元素，解决界面的显示适配问题。</p>
<h4><a id="_18"></a>搭建开发环境</h4>
<p>搭建环境的主要步骤：</p>
<ol>
<li>
<p>下载SDK，<a href="https://flutter.io/docs/get-started/install" rel="nofollow">下载地址</a>。</p>
</li>
<li>
<p>配置PATH，如果使用Mac或者Linux系统，一定要将<code>bin</code>目录添加到系统PATH。</p>
</li>
<li>
<p>配置依赖源镜像，这一步很重要，并且需要将脚本放到启动shell中。</p>
</li>
</ol>
<pre><code>
export PUB_HOSTED_URL=https://pub.flutter-io.cn

export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn

</code></pre>
<ol>
<li>
<p>执行<code>flutter doctor</code>，这一步耗时会很长，需要耐心等耐。</p>
</li>
<li>
<p>安卓开发工具及插件，<a href="https://flutter.io/docs/get-started/editor" rel="nofollow">配置编辑器</a>。</p>
</li>
</ol>
<h4><a id="_40"></a>配置编辑器</h4>
<p>主要是给编辑器安装相应的插件。</p>
<p>VS Code安装<a href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter" rel="nofollow">flutter插件</a>，Android Studio和IDEA需要安装Flutter和Darter插件。</p>
<p>其中Android Studio和IDEA基本一样，跟VS Code的主要区别在于：</p>
<ol>
<li>
<p>VS Code提供了更好的代码提示功能</p>
</li>
<li>
<p>IDEA提供了Flutter Inspector，可实时审查页面元素</p>
</li>
</ol>
<p>可根据个人喜好、习惯选择使用。</p>
<h4><a id="_54"></a>推荐网站</h4>
<p>在安装、配置过程中，可参考以下中文资料：</p>
<p><a href="https://flutter-io.cn/" rel="nofollow">Flutter中国</a></p>
<p><a href="http://doc.flutter-dev.cn/docs/" rel="nofollow">Flutter中文文档</a></p>
<h3><a id="_62"></a>主要技术点</h3>
<h4><a id="Dart_64"></a>Dart</h4>
<p>Flutter项目的开发语言是Dart，Dart 是由 Google 开发的一种面向对象语言，可以编译成 ARM 和 x86 代码直接运行在 iOS、Android 设备上。</p>
<p>推荐先学习Dart语言<a href="https://www.dartlang.org/guides/language/language-tour" rel="nofollow">官方教程</a>，对Dart有初步了解之后再进行Flutter的学习和开发。</p>
<h4><a id="_70"></a>界面开发</h4>
<p>终于可以进入Flutter本身了。</p>
<h5><a id="Widget_74"></a>Widget</h5>
<p>Flutter中页面所有元素都是Widget，又分为StatelessWidget和StatefulWidget。</p>
<p>顾名思义，StatelessWidget 就是指无可变状态的 Widget，这类 Widget 的状态只由创建 Widget 时传入的参数决定，一旦创建，其状态、在页面上的展示效果也就不再改变。</p>
<p>而 StatefulWidget 内部则存在着可变状态。当通过setState改变这些状态时，Flutter 会重新渲染该 Widget。</p>
<h5><a id="_82"></a>布局</h5>
<p>在实际开发中，主要使用了Row、Column、Container、Expanded、Stack等。</p>
<p>Row、Column提供了水平、垂直方向的布局，Stack提供了堆叠方式的布局，各种容器有不同的特性，可根据实际页面需求选择搭配不同的布局。</p>
<p>推荐学习&nbsp;<a href="https://flutter.io/docs" rel="nofollow">官方文档</a>&nbsp;及&nbsp;<a href="https://flutterchina.club/docs/" rel="nofollow">国内维护的中文翻译</a>。</p>
<h4><a id="_90"></a>主要插件</h4>
<p>话题切回到诗词汇APP，本APP收集了4000余位诗人的30多万首诗词，提供了古诗词的查询、收藏、朗诵功能，并且实现了初步的社区功能。</p>
<p>项目目录结构如下：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNTAzODczNi00MWJlZTc5OGM4Y2ZhN2E5?x-oss-process=image/format,png" alt="image"></p>
<p>开发这个APP大概用了一个月的业余时间，每天抽出一两个小时，这样折算为工作日，大概是两个星期左右，开发效率还是很高的。</p>
<p>下面跟大家分享一下主要功能及所使用的一些插件。</p>
<h5><a id="_102"></a>切换主题</h5>
<p>为了实现实时切换主题颜色，使用了状态管理插件。</p>
<p><a href="https://pub.flutter-io.cn/packages/flutter_redux" rel="nofollow">flutter_redux</a>&nbsp;。</p>
<h5><a id="_108"></a>极光推送</h5>
<p>在国内厂商中，极光是少有的对Flutter提供了技术支持的，这里给极光大大的👍。</p>
<p><a href="https://pub.flutter-io.cn/packages/jpush_flutter" rel="nofollow">jpush_flutter</a></p>
<h5><a id="QQ_114"></a>QQ</h5>
<p>QQ的Flutter插件提供了基本的登录、分享功能。</p>
<p><a href="https://pub.flutter-io.cn/packages/flutter_qq" rel="nofollow">flutter_qq</a></p>
<h5><a id="_120"></a>微信</h5>
<p>微信的Flutter插件提供的功能稍微丰富，包含了支付、登录、分享、启动小程序的功能。</p>
<p><a href="https://pub.flutter-io.cn/packages/fluwx" rel="nofollow">fluwx</a></p>
<h5><a id="Event_Bus_126"></a>事件总线Event Bus</h5>
<p>大名鼎鼎的event_bus也提供了对Flutter的支持。</p>
<p><a href="https://pub.flutter-io.cn/packages/event_bus" rel="nofollow">event_bus</a></p>
<h5><a id="_132"></a>音频</h5>
<p>录音及播放音频也有很好的支持。</p>
<p><a href="https://pub.flutter-io.cn/packages/audio_recorder" rel="nofollow">audio_recorder</a></p>
<p><a href="https://pub.flutter-io.cn/packages/audioplayer2" rel="nofollow">audioplayer2</a></p>
<h5><a id="_140"></a>其它</h5>
<p>其它诸如加载HTML、Toast提示、图片选择器、图片加载等也有较好的插件支持。</p>
<p>可在&nbsp;<a href="https://pub.flutter-io.cn/" rel="nofollow">官方插件库</a>&nbsp;查询相关的插件。</p>
<h3><a id="_146"></a>坑</h3>
<h4><a id="_148"></a>安装、升级</h4>
<p>FLutter的安装、升级会经常遇到卡死的问题，主要原因就是使用了Google的源，但是莫名的，即使使用了上网、设置了国内镜像后，也会遇到同样的问题。只能通过反复的<code>flutter doctor</code>&nbsp;或&nbsp;<code>flutter upgrade</code>直到解决问题。</p>
<h4><a id="_152"></a>开发</h4>
<p>由于笔者最近一段时间Android项目做得较多，习惯了Android的XML布局方式，对于在代码中编写页面的形式一开始还有些不习惯，但是在按照官方例子实践了几个页面后，用代码写页面的优势就体现出来了。</p>
<p>在页面已经设计好的情况下，开发的时候脑海中就构思出一个Widget树，从根节点到每一个节点一级一级嵌套下去，自然而然的布局就写好了。</p>
<h4><a id="Dialog_158"></a>Dialog弹出框</h4>
<p>使用Dialog的时候，弹出Dialog的Context及Dialog本身都会压入栈中，所以让Dialog消失的方法是<code>Navigator.of(ctx).pop()</code>，这样的设计既不同于Android也不同于iOS，也许跟Flutter本身所有元素都是Widget的设计有关。</p>
<h4><a id="_162"></a>编译</h4>
<p>在编译Android版本的时候很顺畅，没有遇到任何问题。但是在编译iOS版本的时候，遇到了很多问题，直到现在也没有解决。</p>
<p>问题在于使用了<code>audio_recorder</code>和<code>flutter_qq</code>两个插件，而这两个插件一个要求编译选项需要设置<code>!use_framework</code>，一个要求不能设置，造成了冲突，在实际编译中一直编译不通过。</p>
<h3><a id="_168"></a>结语</h3>
<p>开发结束，最终打包了Release版本的APK，安装到手机后，发现惊喜。</p>
<p><strong>竟然如丝般顺滑，这是我始料未及的，转场效果、页面相应速度不输原生APP。</strong></p>
<p>总而言之，个人对Flutter的前景相当看好，毕竟是Google大厂出品，并且项目本身的迭代速度很快，目前已经是0.11版本，期望在不远的将来发布正式的1.0版本，更期望国内厂商加大对Flutter的支持力度。</p>
<p><strong>顺便推广一下笔者的诗词汇APP，欢迎大家&nbsp;<a href="https://android.myapp.com/myapp/detail.htm?apkName=com.liuzb.allpoems" rel="nofollow">下载试用</a>&nbsp;，或者访问&nbsp;<a href="https://52gushici.cn/" rel="nofollow">诗词汇</a>&nbsp;体验下Flutter如丝般的顺滑。<sup>_</sup></strong></p>
<p><strong>推荐阅读：<a href="https://www.jianshu.com/p/8bab31550431" rel="nofollow">37岁老码农现身说法：那些年，我走过的弯路</a></strong><br>
<strong><a href="https://www.jianshu.com/p/3a040c531456" rel="nofollow">疫情结束后，会影响程序员年后找工作吗？</a></strong></p>
<p>原文作者：<a href="https://link.zhihu.com/?target=https%3A//home.cnblogs.com/u/game-over/" rel="nofollow">Game_over</a></p>
<p>原文链接：<a href="https://link.zhihu.com/?target=https%3A//www.cnblogs.com/game-over/p/9998392.html" rel="nofollow">两个星期，用Flutter撸个APP - Game_over - 博客园</a></p>
<p>来源：博客园</p>

                                    </div>
                <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-60ecaf1f42.css" rel="stylesheet">
                                                <div class="more-toolbox">
                <div class="left-toolbox">
                    <ul class="toolbox-list">
                        
                        <li class="tool-item tool-active is-like "><a href="javascript:;"><svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-thumbsup"></use>
                        </svg><span class="name">点赞</span>
                        <span class="count"></span>
                        </a></li>
                        <li class="tool-item tool-active is-collection "><a href="javascript:;" data-report-click='{"mod":"popu_824"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg><span class="name">收藏</span></a></li>
                        <li class="tool-item tool-active is-share"><a href="javascript:;" data-report-click='{"mod":"1582594662_002"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-fenxiang"></use>
                        </svg>分享</a></li>
                        <!--打赏开始-->
                                                <!--打赏结束-->
                                                <li class="tool-item tool-more">
                            <a>
                            <svg t="1575545411852" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5717" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style>
</head>
<body>
<div style="width:852px;margin:0 auto;">
<div class="blog-content-box">
    <div class="article-header-box">
        <div class="article-header">
            <div class="article-title-box">
                <h1 class="title-article">当中国诗词大会邂逅了Flutter，从此我的眼里只有你！</h1>
            </div>
            <div class="article-info-box">
                <div class="article-bar-top">
                    <!--文章类型-->
                    <span class="article-type type-1 float-left">原创</span>                                                                                                                                            <a class="follow-nickName" href="https://me.csdn.net/weixin_43901866" target="_blank" rel="noopener">Android Developer</a>
                    <span class="time">最后发布于2020-03-07 10:48:59                    </span>
                    <span class="read-count">阅读数 29</span>
                    <a id='blog_detail_zk_collection' class="un-collection" data-report-click='{"mod":"popu_823"}'>
                        <svg class="icon">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg>
                        <span>收藏</span>
                    </a>
                                    </div>
                                <div class="up-time">发布于2020-03-07 10:48:59</div>
                <div class="slide-content-box">
                                                        <div class="tags-box artic-tag-box">
                           <span class="label">分类专栏：</span>
                                                                                             <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9416379.html">
                                       Android                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9429255.html">
                                       程序员                                   </a>
                                                                                                                            <a class="tag-link" target="_blank" rel="noopener"
                                      href="https://blog.csdn.net/weixin_43901866/category_9721804.html">
                                       技术                                   </a>
                                                                                  </div>
                                                                                           <div class="tags-box artic-tag-box">
                                <span class="label">文章标签：</span>
                                                                <a data-report-click='{"mod":"popu_626","strategy":"java"}' data-report-view='{"mod":"popu_626","strategy":"java"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=java&t=blog" target="_blank" rel="noopener">java                                                                    <a data-report-click='{"mod":"popu_626","strategy":"android"}' data-report-view='{"mod":"popu_626","strategy":"android"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=android&t=blog" target="_blank" rel="noopener">android                                                                    <a data-report-click='{"mod":"popu_626","strategy":"编程语言"}' data-report-view='{"mod":"popu_626","strategy":"编程语言"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=编程语言&t=blog" target="_blank" rel="noopener">编程语言                                                                    <a data-report-click='{"mod":"popu_626","strategy":"Flutter"}' data-report-view='{"mod":"popu_626","strategy":"Flutter"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=Flutter&t=blog" target="_blank" rel="noopener">Flutter                                                                    <a data-report-click='{"mod":"popu_626","strategy":"跨平台"}' data-report-view='{"mod":"popu_626","strategy":"跨平台"}' class="tag-link" href="https://so.csdn.net/so/search/s.do?q=跨平台&t=blog" target="_blank" rel="noopener">跨平台                                                                    </a>
                            </div>
                                                                                                                <div class="article-copyright">
                        <span class="creativecommons">
                            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"></a>
                            <span>
                                版权声明：本文为博主原创文章，遵循<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。                            </span>
                            <div class="article-source-link2222">
                                本文链接：<a href="https://blog.csdn.net/weixin_43901866/article/details/104710801">https://blog.csdn.net/weixin_43901866/article/details/104710801</a>
                            </div>
                        </span> 
                        </div>
                                                                                </div>
                <div class="operating">
                                                                <a class="href-article-edit slide-toggle">展开</a>
                                    </div>
            </div>
        </div>
    </div>
    <article class="baidu_pl">
        <!--python安装手册开始-->
                <!--python安装手册结束-->
                <!--####专栏广告位图文切换开始-->
                                    <!--####专栏广告位图文切换结束-->
         <div id="article_content" class="article_content clearfix">
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-833878f763.css" />
                            <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <!-- flowchart 箭头图标 勿删 -->
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                                            <h3><a id="_0"></a>前言</h3>
<p>Flutter是Google推出的跨平台的解决方案，Slogan是“Design beautiful apps”，国内也有知名企业在使用和推广，例如阿里、美团都有在尝试。</p>
<p>个人对其中的一些特性，比如JIT、Material Design、快速开发等很感兴趣，于是决定尝试一下。</p>
<h3><a id="_6"></a>诗词汇</h3>
<p>于是诞生了诗词汇APP，首先看一下是个什么样的APP。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNTAzODczNi0wMWMwNGEwNDdiOGRhY2Rj?x-oss-process=image/format,png" alt=""></p>
<p>接下来我们一步步从不同方面说说Flutter的开发。</p>
<h3><a id="_14"></a>开始</h3>
<p>FLutter可以在Windows、Linux、Mac上进行开发，开发工具可以使用VS Code、Android Studio、IDEA等，本文推荐使用Android Studio，主要在于Android Studio提供了FLutter Inspector工具，可以实时审查元素，解决界面的显示适配问题。</p>
<h4><a id="_18"></a>搭建开发环境</h4>
<p>搭建环境的主要步骤：</p>
<ol>
<li>
<p>下载SDK，<a href="https://flutter.io/docs/get-started/install" rel="nofollow">下载地址</a>。</p>
</li>
<li>
<p>配置PATH，如果使用Mac或者Linux系统，一定要将<code>bin</code>目录添加到系统PATH。</p>
</li>
<li>
<p>配置依赖源镜像，这一步很重要，并且需要将脚本放到启动shell中。</p>
</li>
</ol>
<pre><code>
export PUB_HOSTED_URL=https://pub.flutter-io.cn

export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn

</code></pre>
<ol>
<li>
<p>执行<code>flutter doctor</code>，这一步耗时会很长，需要耐心等耐。</p>
</li>
<li>
<p>安卓开发工具及插件，<a href="https://flutter.io/docs/get-started/editor" rel="nofollow">配置编辑器</a>。</p>
</li>
</ol>
<h4><a id="_40"></a>配置编辑器</h4>
<p>主要是给编辑器安装相应的插件。</p>
<p>VS Code安装<a href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter" rel="nofollow">flutter插件</a>，Android Studio和IDEA需要安装Flutter和Darter插件。</p>
<p>其中Android Studio和IDEA基本一样，跟VS Code的主要区别在于：</p>
<ol>
<li>
<p>VS Code提供了更好的代码提示功能</p>
</li>
<li>
<p>IDEA提供了Flutter Inspector，可实时审查页面元素</p>
</li>
</ol>
<p>可根据个人喜好、习惯选择使用。</p>
<h4><a id="_54"></a>推荐网站</h4>
<p>在安装、配置过程中，可参考以下中文资料：</p>
<p><a href="https://flutter-io.cn/" rel="nofollow">Flutter中国</a></p>
<p><a href="http://doc.flutter-dev.cn/docs/" rel="nofollow">Flutter中文文档</a></p>
<h3><a id="_62"></a>主要技术点</h3>
<h4><a id="Dart_64"></a>Dart</h4>
<p>Flutter项目的开发语言是Dart，Dart 是由 Google 开发的一种面向对象语言，可以编译成 ARM 和 x86 代码直接运行在 iOS、Android 设备上。</p>
<p>推荐先学习Dart语言<a href="https://www.dartlang.org/guides/language/language-tour" rel="nofollow">官方教程</a>，对Dart有初步了解之后再进行Flutter的学习和开发。</p>
<h4><a id="_70"></a>界面开发</h4>
<p>终于可以进入Flutter本身了。</p>
<h5><a id="Widget_74"></a>Widget</h5>
<p>Flutter中页面所有元素都是Widget，又分为StatelessWidget和StatefulWidget。</p>
<p>顾名思义，StatelessWidget 就是指无可变状态的 Widget，这类 Widget 的状态只由创建 Widget 时传入的参数决定，一旦创建，其状态、在页面上的展示效果也就不再改变。</p>
<p>而 StatefulWidget 内部则存在着可变状态。当通过setState改变这些状态时，Flutter 会重新渲染该 Widget。</p>
<h5><a id="_82"></a>布局</h5>
<p>在实际开发中，主要使用了Row、Column、Container、Expanded、Stack等。</p>
<p>Row、Column提供了水平、垂直方向的布局，Stack提供了堆叠方式的布局，各种容器有不同的特性，可根据实际页面需求选择搭配不同的布局。</p>
<p>推荐学习&nbsp;<a href="https://flutter.io/docs" rel="nofollow">官方文档</a>&nbsp;及&nbsp;<a href="https://flutterchina.club/docs/" rel="nofollow">国内维护的中文翻译</a>。</p>
<h4><a id="_90"></a>主要插件</h4>
<p>话题切回到诗词汇APP，本APP收集了4000余位诗人的30多万首诗词，提供了古诗词的查询、收藏、朗诵功能，并且实现了初步的社区功能。</p>
<p>项目目录结构如下：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNTAzODczNi00MWJlZTc5OGM4Y2ZhN2E5?x-oss-process=image/format,png" alt="image"></p>
<p>开发这个APP大概用了一个月的业余时间，每天抽出一两个小时，这样折算为工作日，大概是两个星期左右，开发效率还是很高的。</p>
<p>下面跟大家分享一下主要功能及所使用的一些插件。</p>
<h5><a id="_102"></a>切换主题</h5>
<p>为了实现实时切换主题颜色，使用了状态管理插件。</p>
<p><a href="https://pub.flutter-io.cn/packages/flutter_redux" rel="nofollow">flutter_redux</a>&nbsp;。</p>
<h5><a id="_108"></a>极光推送</h5>
<p>在国内厂商中，极光是少有的对Flutter提供了技术支持的，这里给极光大大的👍。</p>
<p><a href="https://pub.flutter-io.cn/packages/jpush_flutter" rel="nofollow">jpush_flutter</a></p>
<h5><a id="QQ_114"></a>QQ</h5>
<p>QQ的Flutter插件提供了基本的登录、分享功能。</p>
<p><a href="https://pub.flutter-io.cn/packages/flutter_qq" rel="nofollow">flutter_qq</a></p>
<h5><a id="_120"></a>微信</h5>
<p>微信的Flutter插件提供的功能稍微丰富，包含了支付、登录、分享、启动小程序的功能。</p>
<p><a href="https://pub.flutter-io.cn/packages/fluwx" rel="nofollow">fluwx</a></p>
<h5><a id="Event_Bus_126"></a>事件总线Event Bus</h5>
<p>大名鼎鼎的event_bus也提供了对Flutter的支持。</p>
<p><a href="https://pub.flutter-io.cn/packages/event_bus" rel="nofollow">event_bus</a></p>
<h5><a id="_132"></a>音频</h5>
<p>录音及播放音频也有很好的支持。</p>
<p><a href="https://pub.flutter-io.cn/packages/audio_recorder" rel="nofollow">audio_recorder</a></p>
<p><a href="https://pub.flutter-io.cn/packages/audioplayer2" rel="nofollow">audioplayer2</a></p>
<h5><a id="_140"></a>其它</h5>
<p>其它诸如加载HTML、Toast提示、图片选择器、图片加载等也有较好的插件支持。</p>
<p>可在&nbsp;<a href="https://pub.flutter-io.cn/" rel="nofollow">官方插件库</a>&nbsp;查询相关的插件。</p>
<h3><a id="_146"></a>坑</h3>
<h4><a id="_148"></a>安装、升级</h4>
<p>FLutter的安装、升级会经常遇到卡死的问题，主要原因就是使用了Google的源，但是莫名的，即使使用了上网、设置了国内镜像后，也会遇到同样的问题。只能通过反复的<code>flutter doctor</code>&nbsp;或&nbsp;<code>flutter upgrade</code>直到解决问题。</p>
<h4><a id="_152"></a>开发</h4>
<p>由于笔者最近一段时间Android项目做得较多，习惯了Android的XML布局方式，对于在代码中编写页面的形式一开始还有些不习惯，但是在按照官方例子实践了几个页面后，用代码写页面的优势就体现出来了。</p>
<p>在页面已经设计好的情况下，开发的时候脑海中就构思出一个Widget树，从根节点到每一个节点一级一级嵌套下去，自然而然的布局就写好了。</p>
<h4><a id="Dialog_158"></a>Dialog弹出框</h4>
<p>使用Dialog的时候，弹出Dialog的Context及Dialog本身都会压入栈中，所以让Dialog消失的方法是<code>Navigator.of(ctx).pop()</code>，这样的设计既不同于Android也不同于iOS，也许跟Flutter本身所有元素都是Widget的设计有关。</p>
<h4><a id="_162"></a>编译</h4>
<p>在编译Android版本的时候很顺畅，没有遇到任何问题。但是在编译iOS版本的时候，遇到了很多问题，直到现在也没有解决。</p>
<p>问题在于使用了<code>audio_recorder</code>和<code>flutter_qq</code>两个插件，而这两个插件一个要求编译选项需要设置<code>!use_framework</code>，一个要求不能设置，造成了冲突，在实际编译中一直编译不通过。</p>
<h3><a id="_168"></a>结语</h3>
<p>开发结束，最终打包了Release版本的APK，安装到手机后，发现惊喜。</p>
<p><strong>竟然如丝般顺滑，这是我始料未及的，转场效果、页面相应速度不输原生APP。</strong></p>
<p>总而言之，个人对Flutter的前景相当看好，毕竟是Google大厂出品，并且项目本身的迭代速度很快，目前已经是0.11版本，期望在不远的将来发布正式的1.0版本，更期望国内厂商加大对Flutter的支持力度。</p>
<p><strong>顺便推广一下笔者的诗词汇APP，欢迎大家&nbsp;<a href="https://android.myapp.com/myapp/detail.htm?apkName=com.liuzb.allpoems" rel="nofollow">下载试用</a>&nbsp;，或者访问&nbsp;<a href="https://52gushici.cn/" rel="nofollow">诗词汇</a>&nbsp;体验下Flutter如丝般的顺滑。<sup>_</sup></strong></p>
<p><strong>推荐阅读：<a href="https://www.jianshu.com/p/8bab31550431" rel="nofollow">37岁老码农现身说法：那些年，我走过的弯路</a></strong><br>
<strong><a href="https://www.jianshu.com/p/3a040c531456" rel="nofollow">疫情结束后，会影响程序员年后找工作吗？</a></strong></p>
<p>原文作者：<a href="https://link.zhihu.com/?target=https%3A//home.cnblogs.com/u/game-over/" rel="nofollow">Game_over</a></p>
<p>原文链接：<a href="https://link.zhihu.com/?target=https%3A//www.cnblogs.com/game-over/p/9998392.html" rel="nofollow">两个星期，用Flutter撸个APP - Game_over - 博客园</a></p>
<p>来源：博客园</p>

                                    </div>
                <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-60ecaf1f42.css" rel="stylesheet">
                                                <div class="more-toolbox">
                <div class="left-toolbox">
                    <ul class="toolbox-list">
                        
                        <li class="tool-item tool-active is-like "><a href="javascript:;"><svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-thumbsup"></use>
                        </svg><span class="name">点赞</span>
                        <span class="count"></span>
                        </a></li>
                        <li class="tool-item tool-active is-collection "><a href="javascript:;" data-report-click='{"mod":"popu_824"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-Collection-G" ></use>
                        </svg><span class="name">收藏</span></a></li>
                        <li class="tool-item tool-active is-share"><a href="javascript:;" data-report-click='{"mod":"1582594662_002"}'><svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-csdnc-fenxiang"></use>
                        </svg>分享</a></li>
                        <!--打赏开始-->
                                                <!--打赏结束-->
                                                <li class="tool-item tool-more">
                            <a>
                            <svg t="1575545411852" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5717" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M179.176 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z" p-id="5718"></path><path d="M509.684 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z" p-id="5719"></path><path d="M846.175 499.222m-113.245 0a113.245 113.245 0 1 0 226.49 0 113.245 113.245 0 1 0-226.49 0Z" p-id="5720"></path></svg>
                            </a>
                            <ul class="more-box">
                                <li class="item"><a class="article-report">文章举报</a></li>
                            </ul>
                        </li>
                                            </ul>
                </div>
                            </div>
            <div class="person-messagebox">
                <div class="left-message"><a href="https://blog.csdn.net/weixin_43901866">
                    <img src="https://profile.csdnimg.cn/8/2/E/3_weixin_43901866" class="avatar_pic" username='weixin_43901866'>
                                            <img src="https://g.csdnimg.cn/static/user-reg-year/1x/1.png" class="user-years">
                                    </a></div>
                <div class="middle-message">
                                        <div class="title"><span class="tit"><a href="https://blog.csdn.net/weixin_43901866" data-report-click='{"mod":"popu_379"}' target="_blank">Android Developer</a></span>
                                            </div>
                    <div class="text"><span>发布了450 篇原创文章</span> · <span>获赞 730</span> · <span>访问量 20万+</span></div>
                </div>
                                <div class="right-message">
                                            <a href="https://bbs.csdn.net/topics/395532450" target="_blank"
                        class="btn btn-sm btn-red-hollow bt-button personal-messageboard">他的留言板
                        </a>
                                                            <a class="btn btn-sm  bt-button personal-watch" data-report-click='{"mod":"popu_379"}'>关注</a>
                                    </div>
                            </div>
                    </div>
    </article>
</div>
</div>
</body>
</html>
